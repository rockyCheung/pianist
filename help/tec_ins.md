### 🎹  钢琴模拟器技术手册

---

#### **一、软件简介**  
本钢琴模拟器是一款基于MIDI与键盘控制的虚拟钢琴软件，支持88键钢琴音色模拟、实时录音/回放、音阶调节、音量控制及键位自定义功能，适用于音乐教学、创作练习及娱乐演奏。

---

#### **二、系统要求**  
- **操作系统**: Windows 10/11、macOS 10.15+、Linux（需兼容PySide6）  
- **运行环境**: Python 3.9+  
- **依赖库**: PySide6、python-rtmidi、numpy（应急音频生成）  
- **存储空间**: 至少500MB（用于存放音频文件）  

---

#### **三、安装与启动**  
1. **安装依赖库**  
   ```bash
   pip install PySide6 python-rtmidi scipy
   ```

2. **准备音频文件**  
   - 在程序目录下创建 `sounds` 文件夹。  
   - 将钢琴音源文件（命名格式如 `C4.wav`、`C#4.flac` 等）放入该文件夹。  

3. **启动程序**  
   ```bash
   python pianist.py
   ```
4. **国际化**
   ```commandline
   pyside6-lupdate main.py -ts translations/zh_CN.ts
   # 使用 Qt Linguist 完成翻译后...
   pyside6-lrelease translations/zh_CN.ts -qm translations/zh_CN.qm
   ```
---

#### **四、界面与功能说明**  
![界面布局示意图](https://github.com/rockyCheung/pianist)  
（*示意图：主界面分为控制面板与钢琴键盘区域*）

1. **控制面板**  
   - **音阶显示**: 显示当前音程（默认 `0`，按数字键 `0-9` 切换）。  
   - **录音按钮**: 红色按钮，点击开始/停止录音。  
   - **播放按钮**: 绿色按钮，点击回放最近一次录音。  
   - **设置按钮**: 灰色按钮，打开键位映射与音频设置。  
   - **音量滑块**: 拖动调节全局音量，支持平滑过渡。  

2. **钢琴键盘**  
   - **白键**: 宽键，对应自然音符（C、D、E等）。  
   - **黑键**: 窄键，对应升/降音符（C#、D#等）。  
   - **动态效果**: 按下时键位下沉，释放后恢复，伴随音效反馈。

---

#### **五、基本操作**  
1. **键盘演奏**  
   - **音阶切换**: 按数字键 `0-9` 调整音程（如按 `4` 切换至第4音程）。  
   - **音符映射**:  
     - 白键: 直接按字母键（如 `C`、`D`）。  
     - 黑键: `Shift + 字母键`（如 `Shift+C` 对应 `C#`）。  

2. **MIDI设备连接**  
   - 连接MIDI键盘至电脑，软件自动识别并启用。  
   - 按下MIDI琴键，对应虚拟键位高亮并播放音效。

3. **录音与回放**  
   - **开始录音**: 点击红色录音按钮，所有操作将被记录。  
   - **停止录音**: 再次点击录音按钮。  
   - **回放录音**: 点击绿色播放按钮，自动重现演奏过程。

---

#### **六、高级设置**  
点击 **设置按钮** 打开配置界面：  
1. **键位映射**  
   - 修改音符与键盘按键的对应关系（如将 `C4` 绑定至 `A` 键）。  
2. **音频格式**  
   - 支持 `WAV`（默认）、`FLAC`、`MP3`、`OGG` 格式，优先加载高音质文件。  
3. **恢复默认**: 删除 `config.json` 文件后重启程序。

---

#### **七、常见问题**  
1. **无声音输出**  
   - 检查 `sounds` 目录是否存在且包含音频文件。  
   - 确保系统音量未静音，程序音量滑块未调至最低。  

2. **MIDI设备未响应**  
   - 确认设备驱动已安装，连接线正常。  
   - 重启软件或重新插拔MIDI接口。  

3. **录音失败**  
   - 确保录音前已停止其他音频播放程序。  
   - 检查系统麦克风权限（仅限录音输入功能）。  

---

#### **八、技术支持**  
- **问题反馈**: 提交至 [GitHub Issues](https://github.com/rockyCheung/pianist)  
- **更新日志**: 查看项目仓库的 `CHANGELOG.md`  

---

**版本**: 1.0.0  
**更新日期**: 2025年3月  
**开发者**: Rocky Stido Team  

--- 

> 提示：本软件为开源项目，欢迎贡献代码或音效资源！